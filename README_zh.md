<a href="https://space.voce.chat/rooms/bby6-x55t">
<img src="./.github/assets/vocespace.svg" alt="VoceSpace logo" width="240" height="120">
</a>

# VoceSpace

## 演示

访问 [vocespace 演示](https://space.voce.chat/rooms/bby6-x55t) 试用。

## 开发环境设置

启动并运行本地开发环境的步骤：

1. 运行 `pnpm install` 安装所有依赖项。
2. 将 `.env.example` 复制到项目根目录，并将其重命名为 `.env.local`。
3. 创建配置文件`vocespace.conf.json`
4. 运行 `pnpm dev` 启动开发服务器，并访问 [http://localhost:3000](http://localhost:3000) 查看结果。
5. 开始开发 🎉

### vocespace.conf.json

```json
{
  "livekit": {
    "key": "your-production-key",
    "secret": "your-production-secret",
    "url": "ws://host.docker.internal:7880",
    "turn": {
      "urls": "turn:your-turn-server:3478",
      "username": "your-turn-username",
      "credential": "your-turn-password"
    }
  },
  "codec": "vp9",
  "resolution": "1080p",
  "maxBitrate": 3000000,
  "maxFramerate": 30,
  "priority": "medium",
  "redis": {
    "enabled": true,
    "host": "your-redis-host",
    "port": 6379,
    "password": "",
    "db": 0
  },
  "s3": {
    "enabled": false,
    "endpoint": "your-s3-endpoint",
    "bucket": "your-bucket",
    "accessKey": "your-access-key",
    "secretKey": "your-secret-key",
    "region": "your-region"
  },
  "serverUrl": "your-domain.com",
  "hostToken": "your-host-token"
}
```

## 功能

VoceSpace 提供全面的视频会议体验，拥有先进的 AI 功能和丰富的自定义选项。

### 🎥 加入前体验

**基本控制**
- [x] 麦克风预览和测试
- [x] 摄像头预览和设备选择
- [x] 实时视频预览
- [x] 自定义用户名输入和自动生成（用户 01-99 格式）
- [x] 一键加入房间
- [x] 进入时显示用户名焦点
- [x] 使用骨架屏优化加载时间

**高级设置**
- [x] 音量调节和测试
- [x] 多麦克风设备选择
- [x] 带实时预览的视频模糊强度控制
- [x] 多摄像头设备选择
- [x] 设置重置功能
- [x] 自动生成用户名（基于 ULID）
- [x] 高质量无损传输
- [x] 端到端加密 (E2EE)

### 💬 房间体验

**核心功能**
- [x] 高质量音视频通信 (4K@60fps, 2M 编码）
- [x] 支持音频的屏幕共享（可配置）
- [x] 多种布局选项（网格、焦点、演讲者视图）
- [x] 实时聊天及文件共享
- [x] 拖放式文件上传
- [x] 消息历史记录持久化（Redis 支持）
- [x] 未读消息通知（带徽章）
- [x] 聊天消息时间戳，5 分钟分组
- [x] 自动消息滚动
- [x] 链接预览和可点击链接

**主持人管理**
- [x] 房间所有权和主持人
- [x] 参与者管理（静音、视频控制、移除）
- [x] 主持人转移功能
- [x] 参与者音量控制
- [x] 其他人视频/屏幕模糊控制
- [x] 设备邀请系统（摄像头、麦克风、屏幕开关）
- [x] 房间安全控制
- [x] 全局质量设置管理
- [x] 用于管理员功能的主持人令牌身份验证

**互动功能**
- [x] 屏幕共享期间实时光标共享
- [x] 用户之间挥手通知
- [x] 用户状态指示器和自定义状态
- [x] 多语言支持（中/英）
- [x] 按首字母搜索和排序参与者
- [x] 右键菜单用于用户管理
- [x] 带有广播通知的举手功能

### 🏢 空间和房间管理

**多房间架构**
- [x] 主空间，包含无限个子房间
- [x] 公共和私人房间类型
- [x] 房间创建、删除和重命名
- [x] 实时显示参与者数量
- [x] 房间权限管理
- [x] 可悬停扩展的自动折叠侧边栏
- [x] 房间持久性设置

**高级房间功能**
- [x] 私人房间审批系统
- [x] 房间所有者权限和控制
- [x] 跨房间屏幕共享权限
- [x] 退出时自动清理房间
- [x] 特定房间用户状态管理

### 🤖 AI 功能

**虚拟角色**
- [x] Live2D 虚拟角色集成面部追踪
- [x] 实时面部追踪和动画
- [x] 多种虚拟角色模型选择
- [x] 自定义背景和环境
- [x] 性能优化和自动检测
- [x] 无缝虚拟角色切换，带遮罩效果
- [x] 对比前后效果模式
- [x] 每位用户的虚拟角色模型隔离

**音频增强**
- [x] AI 降噪
- [x] 实时音频处理
- [x] 音量标准化
- [x] 可自定义新用户加入提示音

### 🎬 录音和媒体

**房间录音**
- [x] 4K 画质的全房间录音功能
- [x] 主持人发起录音
- [x] 参与者录音请求及审批流程
- [x] 实时录音通知
- [x] 自动 S3 存储集成
- [x] 下载链接，有效期 3 天
- [x] 支持移动端录音，并带有权限检测
- [x] 录音管理面板

**文件管理**
- [x] 聊天中文件拖放共享
- [x] 图片预览和下载
- [x] 按房间自动整理文件
- [x] 安全的文件存储和检索
- [x] 文件大小和类型验证

### 🎮 内置应用

**效率应用**
- [x] 带任务管理功能的待办事项列表应用
- [x] 带圈数记录功能的计时器应用
- [x] 可自定义时长的倒计时器
- [x] 应用浮动窗口
- [x] 可折叠的应用小部件
- [x] 跨参与者应用数据共享

**应用管理**
- [x] 主持人控制的应用权限
- [x] 应用数据上传和同步
- [x] 应用历史记录追踪
- [x] 个人应用共享控件
- [x] 应用数据跨会话持久化

### 🔧 高级设置

**音频配置**
- [x] 设备选择和切换
- [x] 音量控制和测试
- [x] 实时音质调节
- [x] 屏幕共享音频切换
- [x] 可自定义通知声音

**视频配置**
- [x] 摄像头设备管理
- [x] 带 GPU 加速的模糊强度控制 (0-100%)
- [x] 屏幕共享模糊设置
- [x] 实时视频质量优化
- [x] 无损传输模式
- [x] 根据网络连接动态调整质量

**虚拟环境**
- [x] 集成 Live2D 的虚拟模特模型选择
- [x] 背景自定义
- [x] 性能监控和自动调整
- [x] 效果对比模式查看
- [x] WebGL 加速视频处理

**系统偏好设置**
- [x] 多语言界面 (i18n)
- [x] 自定义用户状态创建和管理
- [x] 主题和 UI 自定义
- [x] 在 localStorage 中持久存储设置
- [x] 自动保存设置并即时同步

### 🔒 安全与隐私

**加密与安全**
- [x] 支持端到端加密 (E2EE)
- [x] 安全的 WebRTC 通信
- [x] TURN 服务器集成以实现连接
- [x] 唯一参与者 ID 生成
- [x] 基于会话的身份验证

**权限与访问控制**
- [x] 设备权限管理
- [x] 详细的权限说明和指南
- [x] 精细的访问控制
- [x] 私人房间审批流程
- [x] 主持人权限管理

### 🏗️ 技术特性

**性能与可靠性**
- [x] 客户端性能监控
- [x] 服务器端性能跟踪（带心跳）
- [x] WebGL 加速视频处理
- [x] 优化编解码器选择 (VP9/VP8/H264/AV1)
- [x] 自动重连机制
- [x] 连接质量监控
- [x] 回退连接选项

**基础架构**
- [x] 基于 Redis 的数据持久化
- [x] 使用 Socket.IO 进行 WebSocket 实时通信
- [x] 支持 Docker 部署
- [x] 集成 S3 用于媒体存储
- [x] 自定义 Express + Next.js 服务器架构
- [x] 支持水平扩展

**数据管理**
- [x] 用户会话管理
- [x] 房间状态同步
- [x] 聊天记录持久化
- [x] 应用程序数据备份和恢复
- [x] 自动数据清理和生命周期管理

### 📊 分析与监控

**使用情况分析**
- [x] 实时活跃房间监控
- [x] 历史记录，包含每日/每周/每月排名
- [x] 用户活动分析和排行榜
- [x] 性能指标仪表盘
- [x] 参与者参与度追踪

**管理工具**
- [x] 包含全面统计数据的管理仪表盘
- [x] 所有房间的实时参与者追踪
- [x] 会话时长监控
- [x] 资源使用优化
- [x] 全局配置管理
- [x] 用户管理和审核工具

**开发与部署**
- [x] Docker 容器化
- [x] 基于环境的配置
- [x] 生产/开发模式区分
- [x] 自动部署脚本
- [x] 性能测试和负载均衡
- [x] SEO 优化和元标签

有关详细的功能规范和实现说明，请参阅 [FEATURE.md](./log/FEATURE.md) 和 [TODO.md](./log/TODO.md)。

### 变更日志

请参阅 [CHANGELOG](./log/CHANGELOG.md)